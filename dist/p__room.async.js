"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[608],{11953:function(p,c,l){l.d(c,{W:function(){return S}});var g=l(53920),x=void 0,S=(0,g.io)(x,{autoConnect:!1})},42488:function(p,c,l){l.r(c),l.d(c,{default:function(){return V}});var g=l(861),x=l.n(g),S=l(27424),f=l.n(S),s=l(11953),a=l(67294),C=l(93578),F=l(71230),v=l(15746),U=l(89779),L=l(17917),E=l(16803),G=l(51431),H=l(43863),J={card:"card___Sdtog"},o=l(85893),K=function(h){var j=h.point,t=h.onClick,m=h.style,d=function(Z){t==null||t(Z.target.outerText)};return(0,o.jsx)("div",{className:J.card,onClick:d,style:m,children:j})},X=K,N=l(62094),$=[0,.5,1,2,3,5,8,13,20,40,100,"?"],P=["#f56a00","#7265e6","#ffbf00","#00a2ae"],Q=function(){var h=(0,a.useState)(void 0),j=f()(h,2),t=j[0],m=j[1],d=sessionStorage.getItem("username"),W=(0,C.UO)(),Z=(0,a.useState)(""),b=f()(Z,2),k=b[0],y=b[1],w=(0,a.useState)(),A=f()(w,2),q=A[0],_=A[1],oo=(0,a.useState)(!1),M=f()(oo,2),R=M[0],z=M[1],eo=(0,a.useState)(),B=f()(eo,2),i=B[0],I=B[1];function no(){s.W.connect(),s.W.emit("login",d,function(n){var e=n.isExists,r=n.rooms})}(0,a.useEffect)(function(){if(d&&!s.W.connected&&no(),!d){C.m8.push("/");return}s.W.emit("joinRoom",W.roomName,function(n){var e=n.user,r=n.room;console.log(r),m(r)}),s.W.on("notifyRoomMember",function(n){var e=n.room;m(e)}),s.W.on("newMemberJoin",function(n){var e=n.room;m(e),y("")}),s.W.on("leaveRoom",function(n){var e=n.user,r=n.room;m(r)}),s.W.on("story",function(n){var e=n.story;console.log(e),_(e),y(""),I([])})},[]),(0,a.useEffect)(function(){setTimeout(function(){var n,e=t==null||(n=t.members)===null||n===void 0?void 0:n.filter(function(u){return!u.vote});if(e&&e.length>0)z(!1);else{z(!0);var r=t==null?void 0:t.members.map(function(u){if(!isNaN(Number(u.vote)))return Number(u.vote)}).filter(function(u){return u});if(console.log(r),r&&r.length>0){var D=Math.max.apply(Math,x()(r)),T=Math.min.apply(Math,x()(r)),O=Number(((r==null?void 0:r.reduce(function(u,so){return u+so}))/(r==null?void 0:r.length)).toFixed(2));console.log(D,T,O),I([D,T,O])}}},500)},[t]);var to=function(){s.W.emit("leaveRoom",W.roomName),C.m8.push("/")},lo=function(e){y(e),s.W.emit("vote",e)},ro=function(e){console.log(e.target.value),s.W.emit("story",e.target.value),s.W.emit("clearVote",t==null?void 0:t.roomName),y("")};return(0,o.jsxs)("div",{className:N.Z.content,children:[(0,o.jsxs)(F.Z,{justify:"space-between",children:[(0,o.jsx)(v.Z,{children:(0,o.jsxs)("div",{children:["Hi: ",d," "]})}),(0,o.jsx)(v.Z,{children:(0,o.jsxs)("div",{children:["\u623F\u95F4\uFF1A",t==null?void 0:t.roomName]})}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(U.ZP,{type:"primary",onClick:to,children:"\u79BB\u5F00\u623F\u95F4"})})]}),(0,o.jsx)("p",{style:{color:"#828282",fontSize:24},children:"\u6545\u4E8B\u5361: "}),(0,o.jsx)(L.Z,{disabled:d!==(t==null?void 0:t.creator.username),onPressEnter:ro,placeholder:"\u6309\u4E0B\u56DE\u8F66\u786E\u8BA4",value:q}),(0,o.jsx)("p",{style:{color:"#828282",fontSize:24},children:"\u5361\u7247: "}),(0,o.jsx)(F.Z,{gutter:[0,8],children:$.map(function(n){return(0,o.jsx)(v.Z,{flex:1,children:(0,o.jsx)("div",{className:N.Z.poker,children:(0,o.jsx)(X,{point:n,style:{backgroundColor:"".concat(k===n+""?"#39f3149e":"#FFF"),color:"".concat(k===n+""?"#FFF":"")},onClick:lo})})},n)})}),(0,o.jsxs)(F.Z,{justify:"space-between",align:"middle",children:[(0,o.jsx)(v.Z,{children:(0,o.jsxs)("p",{style:{color:"#828282",fontSize:24},children:["\u6210\u5458: (",t==null?void 0:t.members.length,")"]})}),(0,o.jsx)(v.Z,{children:R&&(0,o.jsxs)("div",{style:{fontSize:16},children:["\u5E73\u5747\u503C\uFF1A",i==null?void 0:i[2]]})})]}),(0,o.jsx)(E.Z,{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:8},dataSource:t==null?void 0:t.members,renderItem:function(e,r){return(0,o.jsx)(E.Z.Item,{children:(0,o.jsx)("div",{style:{padding:10},children:(0,o.jsxs)(G.Z,{gap:"small",vertical:!0,justify:"center",align:"center",children:[(0,o.jsx)(H.C,{style:{backgroundColor:P[r%P.length],verticalAlign:"middle"},size:72,children:e.username}),R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{fontSize:36,fontWeight:"bold",color:"#5190BF"},children:e==null?void 0:e.vote}),(e==null?void 0:e.vote)*1===(i==null?void 0:i[0])&&(0,o.jsx)("div",{style:{fontSize:18,fontWeight:"bold",color:"#ff0000"},children:"MAX"}),(e==null?void 0:e.vote)*1===(i==null?void 0:i[1])&&(0,o.jsx)("div",{style:{fontSize:18,fontWeight:"bold",color:"#ff0000"},children:"MIN"})]}),e.vote&&!R&&(0,o.jsx)("div",{style:{fontSize:36,fontWeight:"bold",color:"#5190BF"},children:"\u2714"})]})})})}})]})},V=Q},62094:function(p,c){c.Z={content:"content___nGCOl",poker:"poker___lBuFP"}}}]);
